<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Real Tree Guy</title>
  <link rel="stylesheet" href="assets/styles.css">

  <style>
    /* 
    ============================================================
    NIGHT MODE THEME
    ------------------------------------------------------------
    When the body has the class "night-mode", the entire OS
    switches to a dark, cinematic forest theme with stars,
    moonlight, and tree silhouettes.
    ============================================================
    */

    body.night-mode {
      background: #0b0f17;   /* Deep night sky */
      color: #e0f7ff;        /* Soft moonlit text */
    }

    body.night-mode .main-header {
      background: transparent;
      color: #e0f7ff;
    }

    body.night-mode .nav-card {
      background: rgba(255,255,255,0.08);
      color: #e0f7ff;
      border: 1px solid rgba(255,255,255,0.15);
    }

    /* 
    STARFIELD LAYER
    A repeating PNG of stars that gently twinkles.
    This sits behind all content and does not interfere with clicks.
    */
    body.night-mode::before {
      content: "";
      position: fixed;
      inset: 0;
      background: url('assets/stars.png') repeat;
      opacity: 0.25;
      pointer-events: none;
      animation: twinkle 8s infinite linear;
    }

    @keyframes twinkle {
      from { opacity: 0.2; }
      to { opacity: 0.35; }
    }

    /* 
    MOON LAYER
    A glowing moon rendered with a radial gradient.
    */
    body.night-mode::after {
      content: "";
      position: fixed;
      top: 40px;
      right: 60px;
      width: 120px;
      height: 120px;
      background: radial-gradient(circle, #fff 40%, #ddd 60%, #bbb 100%);
      border-radius: 50%;
      box-shadow: 0 0 40px rgba(255,255,255,0.4);
      pointer-events: none;
    }

    /* 
    TREE SILHOUETTES
    A repeating PNG of tree outlines at the bottom of the screen.
    */
    .night-trees {
      display: none;
    }

    body.night-mode .night-trees {
      display: block;
      position: fixed;
      bottom: 0;
      left: 0;
      width: 100%;
      height: 180px;
      background: url('assets/trees-silhouette.png') repeat-x bottom;
      opacity: 0.6;
      pointer-events: none;
    }

    /* 
    NIGHT MODE TOGGLE SWITCH
    This sits in the top-right corner and flips the theme.
    */
    .toggle-container {
      position: absolute;
      top: 20px;
      right: 20px;
    }

    .toggle-container input {
      width: 50px;
      height: 24px;
      cursor: pointer;
    }
  </style>
</head>

<body class="fade-in">

  <!-- 
  ============================================================
  TREE SILHOUETTE LAYER (only visible in night mode)
  ============================================================
  -->
  <div class="night-trees"></div>

  <!-- 
  ============================================================
  NIGHT MODE TOGGLE
  This checkbox toggles the "night-mode" class on <body>.
  The theme preference is saved in localStorage.
  ============================================================
  -->
  <div class="toggle-container">
    <label>
      <input type="checkbox" id="themeToggle">
      ðŸŒ™ Night Mode
    </label>
  </div>

  <!-- 
  ============================================================
  HEADER
  Displays the OS title and tagline.
  ============================================================
  -->
  <header class="main-header">
    <h1 class="app-title">Real Tree Guy</h1>
    <p class="app-subtitle">Modular Static OS for Tree Work</p>
  </header>

  <!-- 
  ============================================================
  MAIN NAVIGATION GRID
  Each module is a standalone page in /modules/.
  Tree Measurement is intentionally centered using CSS order.
  The new REAL TREE MAP module is added here.
  ============================================================
  -->
  <main>
    <nav class="nav-grid">

      <!-- Business Profile Module -->
      <a href="modules/profile/profile.html" class="nav-card">Profile</a>

      <!-- Customer CRM + Job Manager -->
      <a href="modules/customers/customers.html" class="nav-card">Customers & Jobs</a>

      <!-- Tree Measurement moved visually to center -->
      <a href="modules/measurement/measurement.html" class="nav-card" style="order:-1;">Tree Measurement</a>

      <!-- Contract Generator + Archive -->
      <a href="modules/contracts/contracts.html" class="nav-card">Contracts</a>

      <!-- Unified Calendar (tasks, reminders, contracts, jobs) -->
      <a href="modules/calendar/calendar.html" class="nav-card">Calendar</a>

      <!-- Cards & Flyers Studio -->
      <a href="modules/flyers/flyers.html" class="nav-card">Cards & Flyers</a>

      <!-- 
      ============================================================
      NEW MODULE: REAL TREE MAP
      This links to your custom mapping engine:
      - Nationwide tree lookup
      - Job locations
      - Supply hubs
      - Client addresses
      - Directions
      - Street view
      ============================================================
      -->
      <a href="modules/map/real-tree-map.html" class="nav-card">Real Tree Map</a>

    </nav>
  </main>

  <!-- 
  ============================================================
  FOOTER
  ============================================================
  -->
  <footer class="main-footer">
    <p>Real Tree Guy â€¢ Modular Static App</p>
  </footer>

  <!-- 
  ============================================================
  NIGHT MODE SCRIPT
  Loads saved theme from localStorage and toggles the class.
  ============================================================
  -->
  <script>
    const toggle = document.getElementById("themeToggle");
    const body = document.body;

    // Load saved theme on page load
    if (localStorage.getItem("tn_theme") === "night") {
      body.classList.add("night-mode");
      toggle.checked = true;
    }

    // Toggle theme and save preference
    toggle.onchange = () => {
      if (toggle.checked) {
        body.classList.add("night-mode");
        localStorage.setItem("tn_theme", "night");
      } else {
        body.classList.remove("night-mode");
        localStorage.setItem("tn_theme", "day");
      }
    };
  </script>

</body>
</html>
